<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>linYee&#39;s blog | 进击webpack</title>
    <meta name="description" content="可长歌，可醉饮，唯不可离去">
    
    
    <link rel="preload" href="/assets/css/0.styles.e9561589.css" as="style"><link rel="preload" href="/assets/js/app.c28e1187.js" as="script"><link rel="preload" href="/assets/js/14.c09d8685.js" as="script"><link rel="prefetch" href="/assets/js/33.5d615819.js"><link rel="prefetch" href="/assets/js/1.314e9720.js"><link rel="prefetch" href="/assets/js/2.b7ae9f51.js"><link rel="prefetch" href="/assets/js/3.1469442e.js"><link rel="prefetch" href="/assets/js/4.8b9c3665.js"><link rel="prefetch" href="/assets/js/5.8f05fa48.js"><link rel="prefetch" href="/assets/js/6.de11eee2.js"><link rel="prefetch" href="/assets/js/7.058c7ab3.js"><link rel="prefetch" href="/assets/js/8.c485cbd9.js"><link rel="prefetch" href="/assets/js/9.14214538.js"><link rel="prefetch" href="/assets/js/10.0c8a647e.js"><link rel="prefetch" href="/assets/js/11.5d18dcd9.js"><link rel="prefetch" href="/assets/js/12.99e91df1.js"><link rel="prefetch" href="/assets/js/13.14fc9d1a.js"><link rel="prefetch" href="/assets/js/15.a2f4c159.js"><link rel="prefetch" href="/assets/js/16.c8513de2.js"><link rel="prefetch" href="/assets/js/17.77a65d16.js"><link rel="prefetch" href="/assets/js/18.2ed37ee1.js"><link rel="prefetch" href="/assets/js/19.1cf6910b.js"><link rel="prefetch" href="/assets/js/20.5a01f12d.js"><link rel="prefetch" href="/assets/js/21.ed3c83c5.js"><link rel="prefetch" href="/assets/js/22.418ec443.js"><link rel="prefetch" href="/assets/js/23.43c2d579.js"><link rel="prefetch" href="/assets/js/24.106790ab.js"><link rel="prefetch" href="/assets/js/25.83b6967b.js"><link rel="prefetch" href="/assets/js/26.2ddc9425.js"><link rel="prefetch" href="/assets/js/27.623b7ab8.js"><link rel="prefetch" href="/assets/js/28.51006cb3.js"><link rel="prefetch" href="/assets/js/29.0c2dbf0e.js"><link rel="prefetch" href="/assets/js/30.3dfcd80c.js"><link rel="prefetch" href="/assets/js/31.6e3e651d.js"><link rel="prefetch" href="/assets/js/32.a1340061.js"><link rel="prefetch" href="/assets/js/34.806c3aca.js"><link rel="prefetch" href="/assets/js/35.a93ce73b.js"><link rel="prefetch" href="/assets/js/36.88eb63e0.js"><link rel="prefetch" href="/assets/js/37.c53b1529.js"><link rel="prefetch" href="/assets/js/38.d8a736e3.js"><link rel="prefetch" href="/assets/js/39.8d87e087.js"><link rel="prefetch" href="/assets/js/40.abc9cabf.js"><link rel="prefetch" href="/assets/js/41.ab549a3a.js"><link rel="prefetch" href="/assets/js/42.d5b9899d.js"><link rel="prefetch" href="/assets/js/43.180edec4.js"><link rel="prefetch" href="/assets/js/44.fa1da641.js"><link rel="prefetch" href="/assets/js/45.e49fe417.js"><link rel="prefetch" href="/assets/js/46.006c5467.js"><link rel="prefetch" href="/assets/js/47.c2f4fe77.js"><link rel="prefetch" href="/assets/js/48.31f7bd25.js"><link rel="prefetch" href="/assets/js/49.ff43b66c.js"><link rel="prefetch" href="/assets/js/50.8097df43.js"><link rel="prefetch" href="/assets/js/51.ff1e2e34.js"><link rel="prefetch" href="/assets/js/52.0b64b055.js"><link rel="prefetch" href="/assets/js/53.d6b07f08.js"><link rel="prefetch" href="/assets/js/54.d90f1430.js"><link rel="prefetch" href="/assets/js/55.36a0f5d2.js"><link rel="prefetch" href="/assets/js/56.3fa1e1fc.js"><link rel="prefetch" href="/assets/js/57.b405dc9e.js"><link rel="prefetch" href="/assets/js/58.e00c43fc.js"><link rel="prefetch" href="/assets/js/59.80b36c49.js"><link rel="prefetch" href="/assets/js/60.a1bbdc6a.js"><link rel="prefetch" href="/assets/js/61.91a83384.js"><link rel="prefetch" href="/assets/js/62.23603e69.js"><link rel="prefetch" href="/assets/js/63.07c9232e.js"><link rel="prefetch" href="/assets/js/64.7e6b1d65.js"><link rel="prefetch" href="/assets/js/65.c802ed55.js"><link rel="prefetch" href="/assets/js/66.eea0beab.js"><link rel="prefetch" href="/assets/js/67.584b410a.js"><link rel="prefetch" href="/assets/js/68.cc18b160.js"><link rel="prefetch" href="/assets/js/69.77e1586e.js"><link rel="prefetch" href="/assets/js/70.2003d970.js"><link rel="prefetch" href="/assets/js/71.60093cc3.js"><link rel="prefetch" href="/assets/js/72.796ad2eb.js"><link rel="prefetch" href="/assets/js/73.c4a8b30b.js"><link rel="prefetch" href="/assets/js/74.feb798c8.js"><link rel="prefetch" href="/assets/js/75.6fb13014.js"><link rel="prefetch" href="/assets/js/76.edb2c0b5.js"><link rel="prefetch" href="/assets/js/77.9e39f58e.js"><link rel="prefetch" href="/assets/js/78.08ca8c00.js"><link rel="prefetch" href="/assets/js/79.7366f16a.js"><link rel="prefetch" href="/assets/js/80.0d2e0e48.js"><link rel="prefetch" href="/assets/js/81.fe23c69b.js"><link rel="prefetch" href="/assets/js/82.ca6ca6a2.js"><link rel="prefetch" href="/assets/js/83.03da1a3f.js"><link rel="prefetch" href="/assets/js/84.db1a588f.js"><link rel="prefetch" href="/assets/js/85.bcc7a0d3.js"><link rel="prefetch" href="/assets/js/86.82e737b3.js"><link rel="prefetch" href="/assets/js/87.ed015db9.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e9561589.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      linYee's blog
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">博客</a></div><div class="nav-item"><a href="/life/" class="nav-link">生活</a></div><div class="nav-item"><a href="/resume/" class="nav-link">简历</a></div><a href="https://github.com/linYeeTracy/blogs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">博客</a></div><div class="nav-item"><a href="/life/" class="nav-link">生活</a></div><div class="nav-item"><a href="/resume/" class="nav-link">简历</a></div><a href="https://github.com/linYeeTracy/blogs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><a href="/blog/md-example.html" class="sidebar-link">markdown语法实例</a></li><li><a href="/blog/git.html" class="sidebar-link">git 命令行</a></li><li><a href="/blog/github-plugins.html" class="sidebar-link">文档整理</a></li><li><a href="/blog/es6.html" class="sidebar-link">es6</a></li><li><a href="/blog/react.html" class="sidebar-link">react</a></li><li><a href="/blog/ruby-gem.html" class="sidebar-link">ruby-gem</a></li><li><a href="/blog/vue-amap.html" class="sidebar-link">在 Vue 中使用高德地图的一些问题</a></li><li><a href="/blog/vue-business-component.html" class="sidebar-link">谈谈 Vue 业务组件</a></li><li><a href="/blog/axios.html" class="sidebar-link">axios</a></li><li><a href="/blog/babel.html" class="sidebar-link">babel6 的变化</a></li><li><a href="/blog/css技巧.html" class="sidebar-link">css小技巧</a></li><li><a href="/blog/express.html" class="sidebar-link">嘻嘻嘻</a></li><li><a href="/blog/git-github.html" class="sidebar-link">git-github</a></li><li><a href="/blog/gulp插件集合.html" class="sidebar-link">gulp插件集合</a></li><li><a href="/blog/js-array.html" class="sidebar-link">js-array</a></li><li><a href="/blog/js的模块化.html" class="sidebar-link">js的模块化</a></li><li><a href="/blog/jwt.html" class="sidebar-link">jwt</a></li><li><a href="/blog/linux.html" class="sidebar-link">linux</a></li><li><a href="/blog/lodash.html" class="sidebar-link">lodash</a></li><li><a href="/blog/markdown.html" class="sidebar-link">packageJson</a></li><li><a href="/blog/nginx.html" class="sidebar-link">nginx</a></li><li><a href="/blog/node-fs.html" class="sidebar-link">node - fs</a></li><li><a href="/blog/node-express.html" class="sidebar-link">node-express</a></li><li><a href="/blog/node.html" class="sidebar-link">node</a></li><li><a href="/blog/npm整理.html" class="sidebar-link">npm整理</a></li><li><a href="/blog/packageJson.html" class="sidebar-link">packageJson</a></li><li><a href="/blog/pm2.html" class="sidebar-link">pm2</a></li><li><a href="/blog/reduce应用.html" class="sidebar-link">reduce应用及高级技巧</a></li><li><a href="/blog/server.html" class="sidebar-link">server</a></li><li><a href="/blog/vue-router.html" class="sidebar-link">安装</a></li><li><a href="/blog/vue.html" class="sidebar-link">vue</a></li><li><a href="/blog/vuex.html" class="sidebar-link">vuex</a></li><li><a href="/blog/vue生命周期.html" class="sidebar-link">vue生命周期</a></li><li><a href="/blog/webpack整理.html" class="active sidebar-link">进击webpack</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/webpack整理.html#要处理的文件类型" class="sidebar-link">要处理的文件类型</a></li><li class="sidebar-sub-header"><a href="/blog/webpack整理.html#常用模块" class="sidebar-link">常用模块</a></li><li class="sidebar-sub-header"><a href="/blog/webpack整理.html#自动刷新" class="sidebar-link">自动刷新</a></li><li class="sidebar-sub-header"><a href="/blog/webpack整理.html#source-maps-使调试更容易" class="sidebar-link">source Maps 使调试更容易</a></li><li class="sidebar-sub-header"><a href="/blog/webpack整理.html#webpack-本地服务器-webpack-dev-server" class="sidebar-link">webpack 本地服务器 webpack-dev-server</a></li><li class="sidebar-sub-header"><a href="/blog/webpack整理.html#loaders-2" class="sidebar-link">loaders</a></li><li class="sidebar-sub-header"><a href="/blog/webpack整理.html#webpack-对-babel的处理" class="sidebar-link">webpack 对 babel的处理</a></li><li class="sidebar-sub-header"><a href="/blog/webpack整理.html#一切皆模块" class="sidebar-link">一切皆模块</a></li><li class="sidebar-sub-header"><a href="/blog/webpack整理.html#plugins-插件" class="sidebar-link">plugins 插件</a></li><li class="sidebar-sub-header"><a href="/blog/webpack整理.html#webpack的一些高阶特性" class="sidebar-link">webpack的一些高阶特性</a></li></ul></li><li><a href="/blog/分辨率与像素.html" class="sidebar-link">分辨率与像素</a></li><li><a href="/blog/模块化引入方式.html" class="sidebar-link">模块化引入方式</a></li><li><a href="/blog/正则表达式.html" class="sidebar-link">正则表达式</a></li><li><a href="/blog/正则表达式实例整理.html" class="sidebar-link">正则表达式实例整理</a></li><li><a href="/blog/xingnengyouhua.html" class="sidebar-link">前端性能优化总结</a></li></ul></div><div class="page"><div class="content"><h1 id="什么是webpack？webpack干什么"><a href="#什么是webpack？webpack干什么" aria-hidden="true" class="header-anchor">#</a> 什么是webpack？webpack干什么</h1><p>打包：可以把多个Javascript文件打包成一个文件，减少服务器压力和下载带宽。
转换：把拓展语言转换成为普通的JavaScript，让浏览器顺利运行。
优化：前端变的越来越复杂后，性能也会遇到问题，而WebPack也开始肩负起了优化和提升性能的责任。</p><h2 id="要处理的文件类型"><a href="#要处理的文件类型" aria-hidden="true" class="header-anchor">#</a> 要处理的文件类型</h2><p>以js为入口</p><p>html -- html-webpack-plugin
脚本 -- babel + babel-preset-react
样式 -- css-loader + sass-loader
图片、字体 -- url-loader + file-loader</p><h2 id="常用模块"><a href="#常用模块" aria-hidden="true" class="header-anchor">#</a> 常用模块</h2><p>html-webpack-plugin html单独打包成文件
extract-text-webpack-plugin 样式打包成单独文件<br>
commonsChunkPlugin 提出通用模块
webpack-dev-server 为webpack项目提供web服务,监听文件自动刷新页面，路径转发（代理）</p><h1 id="webpack-config-js"><a href="#webpack-config-js" aria-hidden="true" class="header-anchor">#</a> webpack.config.js</h1><pre class="language-text"><code>module.exports={
    // 入口文件的配置项
    // 配置入口文件的地址，可以是单一入口，也可以是多入口。
    // 可以是个字符串、数组、对象
    // 数组的话，所有文件打包生成一个filename，对象可以将不同的文件构建成不同的文件
    entry:{},
    // 出口文件的配置项
    // 配置出口文件的地址，在webpack2.X版本后，支持多出口配置。
    output:{},
    //模块：例如解读CSS,图片如何转换，压缩
    module:{
        // 除了纯js外，每种资源都可以通过对应的加载器处理成模块，这样我们就可以通过require来加载任何类型的文件或模块
        // 通过`感叹号`连接，一个加载器的输出可以成为另一个加载器的输入，顺序是从右向左
        // 比如less文件通过less-load处理成css，然后通过css-loader加载成css模块，最后由style-loader加载器对其最后处理可以应用到最终浏览器环境。
        // 问号指的是查询使用的参数
        loaders: [{
            test: /\.js$/,
            exclude: /node_modules/,
            loader: 'babel?presets[]=es2015&amp;presets[]=react'
            // 等价
            loader:'babel',
                query:{
                        presets:['es2015','react']
                }
        }]
    },
    //插件，用于生产模版和各项功能
    plugins:[],
    //配置webpack开发服务功能
    devServer:{}
}
</code></pre><h1 id="webpack-dev-server"><a href="#webpack-dev-server" aria-hidden="true" class="header-anchor">#</a> webpack-dev-server</h1><p>可以监控到我们修改源码，并立即在浏览器里给我们更新
webpack-dev-server 生成的包并没有放在你的真实目录中，而是放在了内存中</p><pre class="language-text"><code>devServer:{
    //设置基本目录结构
    contentBase:path.resolve(__dirname,'dist'),
    //服务器的IP地址，可以使用IP也可以使用localhost
    host:'localhost',
    //服务端压缩是否开启
    compress:true,
    //配置服务端口号
    port:1717
}
</code></pre><h2 id="自动刷新"><a href="#自动刷新" aria-hidden="true" class="header-anchor">#</a> 自动刷新</h2><p>inline模式 -- 将webpack-dev-server的客户端入口添加到包中
iframe模式 -- 页面放在iframe中,当发生改变时重载</p><h1 id="webpack打包机制"><a href="#webpack打包机制" aria-hidden="true" class="header-anchor">#</a> webpack打包机制</h1><ol><li>从配置文件里找到entry point</li><li>解析模块系统</li><li>模块依赖处理（读取、解析、解决）</li><li>合并所有使用的模块</li><li>合并模块系统的运行时环境</li><li>产生打包后文件</li></ol><h1 id="浏览器如何解析webpack打好的包"><a href="#浏览器如何解析webpack打好的包" aria-hidden="true" class="header-anchor">#</a> 浏览器如何解析webpack打好的包</h1><ol><li>通过<code>script</code>标签加载webpack打包后的文件</li><li>加载模块运行时环境</li><li>加载entry point</li><li>读取依赖，解决依赖</li><li>执行带依赖的entry pointer</li></ol><h1 id="loaders"><a href="#loaders" aria-hidden="true" class="header-anchor">#</a> loaders</h1><ul><li>test：用于匹配处理文件的扩展名的表达式，这个选项是必须进行配置的；</li><li>use：loader名称，就是你要使用模块的名称，这个选项也必须进行配置，否则报错；</li><li>include/exclude:手动添加必须处理的文件（文件夹）或屏蔽不需要处理的文件（文件夹）（可选）；</li><li>query：为loaders提供额外的设置选项（可选）。</li></ul><h1 id="问题整理"><a href="#问题整理" aria-hidden="true" class="header-anchor">#</a> 问题整理</h1><h3 id="require方法"><a href="#require方法" aria-hidden="true" class="header-anchor">#</a> require方法</h3><pre class="language-bash"><code>const requireAll <span class="token operator">=</span> requireContext <span class="token operator">=</span><span class="token operator">&gt;</span> requireContext.keys<span class="token punctuation">(</span><span class="token punctuation">)</span>.map<span class="token punctuation">(</span>requireContext<span class="token punctuation">)</span>
const req <span class="token operator">=</span> require.context<span class="token punctuation">(</span><span class="token string">'./svg'</span>, false, /\.svg$/<span class="token punctuation">)</span>
requireAll<span class="token punctuation">(</span>req<span class="token punctuation">)</span>
// 这个是webpack提供的require方法，可以创建上下文环境。相当于将svg目录下的svg文件require进来。
</code></pre><h3 id="path-resolve"><a href="#path-resolve" aria-hidden="true" class="header-anchor">#</a> path.resolve()</h3><h2 id="source-maps-使调试更容易"><a href="#source-maps-使调试更容易" aria-hidden="true" class="header-anchor">#</a> source Maps 使调试更容易</h2><p>打包时生成，为我们提供一种对应编译文件yu源文件的方法。使编译后的代码可读性更高。</p><p>在webpack的配置文件中配置source maps，需要配置<code>devtool</code>，它有以下四种不同的配置选项，各具优缺点，描述如下：</p><table><thead><tr><th>dev选项</th><th>配置结果</th></tr></thead><tbody><tr><td>source-map</td><td>在一个单独的文件中产生一个完整且功能完全的文件。这个文件具有最好的source map，但是它会减慢打包速度；</td></tr><tr><td>cheap-module-source-map</td><td>在一个单独的文件中生成一个不带列映射的map，不带列映射提高了打包速度，但是也使得浏览器开发者工具只能对应到具体的行，不能对应到具体的列（符号），会对调试造成不便；</td></tr><tr><td>eval-source-map</td><td>使用eval打包源文件模块，在同一个文件中生成干净的完整的source map。这个选项可以在不影响构建速度的前提下生成完整的sourcemap，但是对打包后输出的JS文件的执行具有性能和安全的隐患。在开发阶段这是一个非常好的选项，在生产阶段则一定不要启用这个选项；</td></tr><tr><td>cheap-module-eval-source-map</td><td>这是在打包文件时最快的生成source map的方法，生成的Source Map 会和打包后的JavaScript文件同行显示，没有列映射，和eval-source-map选项具有相似的缺点；</td></tr></tbody></table><h2 id="webpack-本地服务器-webpack-dev-server"><a href="#webpack-本地服务器-webpack-dev-server" aria-hidden="true" class="header-anchor">#</a> webpack 本地服务器 webpack-dev-server</h2><p>让你的浏览器监听你的代码的修改，并自动刷新显示修改后的结果，其实Webpack提供一个可选的本地开发服务器，这个本地服务器基于node.js构建，可以实现你想要的这些功能，不过它是一个单独的组件，在webpack中进行配置之前需要单独安装它作为项目依赖。</p><pre class="language-text"><code>npm install --save-dev webpack-dev-server
</code></pre><p>|devserver 配置项|功能描述|
|contentBase|默认webpack-dev-server会为根文件夹提供本地服务器，如果想为另外一个目录下的文件提供本地服务器，应该在这里设置其所在目录（本例设置到“public&quot;目录）|
|port|设置默认监听端口，如果省略，默认为”8080“|
|inline|设置为true，当源文件改变时会自动刷新页面|
|historyApiFallback|开发单页应用时非常有用，它依赖于HTML5 history API，如果设置为true，所有的跳转将指向index.html|</p><h2 id="loaders-2"><a href="#loaders-2" aria-hidden="true" class="header-anchor">#</a> loaders</h2><p>通过使用不同的loader，webpack有能力调用外部的脚本或工具，实现对不同格式的文件的处理，比如说分析转换scss为css，或者把下一代的JS文件（ES6，ES7)转换为现代浏览器兼容的JS文件，对React的开发而言，合适的Loaders可以把React的中用到的JSX文件转换为JS文件。</p><blockquote><p>Loaders需要单独安装并且需要在webpack.config.js中的modules关键字下进行配置</p></blockquote><p>loaders的配置包括几方面:</p><ul><li>test：一个用以匹配loaders所处理文件的拓展名的正则表达式（必须）</li><li>loader：loader的名称（必须）</li><li>include/exclude:手动添加必须处理的文件（文件夹）或屏蔽不需要处理的文件（文件夹）（可选）；</li><li>query：为loaders提供额外的设置选项（可选）</li></ul><blockquote><p>webpack3.*/webpack2.*已经内置可处理JSON文件,无需增加 <code>json-loader</code></p></blockquote><h2 id="webpack-对-babel的处理"><a href="#webpack-对-babel的处理" aria-hidden="true" class="header-anchor">#</a> webpack 对 babel的处理</h2><p>Babel其实是几个模块化的包，其核心功能位于称为babel-core的npm包中，webpack可以把其不同的包整合在一起使用，对于每一个你需要的功能或拓展，你都需要安装单独的包（用得最多的是解析Es6的babel-env-preset包和解析JSX的babel-preset-react包）。</p><p>先来一次性安装这些依赖包</p><pre class="language-text"><code>npm install --save-dev babel-core babel-loader babel-preset-env babel-preset-react
</code></pre><p>在webpack中配置Babel的方法如下:</p><pre class="language-text"><code>module.exports = {
    entry: __dirname + &quot;/app/main.js&quot;,//已多次提及的唯一入口文件
    output: {
        path: __dirname + &quot;/public&quot;,//打包后的文件存放的地方
        filename: &quot;bundle.js&quot;//打包后输出文件的文件名
    },
    devtool: 'eval-source-map',
    devServer: {
        contentBase: &quot;./public&quot;,//本地服务器所加载的页面所在的目录
        historyApiFallback: true,//不跳转
        inline: true//实时刷新
    },
    module: {
        rules: [
            {
                test: /(\.jsx|\.js)$/,
                use: {
                    loader: &quot;babel-loader&quot;,
                    options: {
                        presets: [
                            &quot;env&quot;, &quot;react&quot;
                        ]
                    }
                },
                exclude: /node_modules/
            }
        ]
    }
};
</code></pre><p>babel其实可以完全在 webpack.config.js 中进行配置，但是考虑到babel具有非常多的配置选项，在单一的webpack.config.js文件中进行配置往往使得这个文件显得太复杂，因此一些开发者支持把babel的配置选项放在一个单独的名为 &quot;.babelrc&quot; 的配置文件中。我们现在的babel的配置并不算复杂，不过之后我们会再加一些东西，因此现在我们就提取出相关部分，分两个配置文件进行配置（webpack会自动调用.babelrc里的babel配置选项），如下：</p><pre class="language-text"><code>module.exports = {
    entry: __dirname + &quot;/app/main.js&quot;,//已多次提及的唯一入口文件
    output: {
        path: __dirname + &quot;/public&quot;,//打包后的文件存放的地方
        filename: &quot;bundle.js&quot;//打包后输出文件的文件名
    },
    devtool: 'eval-source-map',
    devServer: {
        contentBase: &quot;./public&quot;,//本地服务器所加载的页面所在的目录
        historyApiFallback: true,//不跳转
        inline: true//实时刷新
    },
    module: {
        rules: [
            {
                test: /(\.jsx|\.js)$/,
                use: {
                    loader: &quot;babel-loader&quot;
                },
                exclude: /node_modules/
            }
        ]
    }
};
</code></pre><h2 id="一切皆模块"><a href="#一切皆模块" aria-hidden="true" class="header-anchor">#</a> 一切皆模块</h2><p>Webpack有一个不可不说的优点，它把所有的文件都都当做模块处理，JavaScript代码，CSS和fonts以及图片等等通过合适的loader都可以被处理。</p><h3 id="css"><a href="#css" aria-hidden="true" class="header-anchor">#</a> css</h3><p>webpack提供两个工具处理样式表，css-loader 和 style-loader，二者处理的任务不同，css-loader使你能够使用类似@import 和 url(...)的方法实现 require()的功能,style-loader将所有的计算后的样式加入页面中，二者组合在一起使你能够把样式表嵌入webpack打包后的JS文件中。</p><pre class="language-text"><code>npm install --save-dev style-loader css-loader
</code></pre><pre class="language-text"><code>module.exports = {

   ...
    module: {
        rules: [
            {
                test: /(\.jsx|\.js)$/,
                use: {
                    loader: &quot;babel-loader&quot;
                },
                exclude: /node_modules/
            },
            {
                test: /\.css$/,
                use: [
                    {
                        loader: &quot;style-loader&quot;
                    }, {
                        loader: &quot;css-loader&quot;
                    }
                ]
            }
        ]
    }
};
</code></pre><h3 id="css预处理器"><a href="#css预处理器" aria-hidden="true" class="header-anchor">#</a> CSS预处理器</h3><p>比如：</p><ul><li>Less Loader</li><li>sass Loader</li><li>Stylus Loader</li><li>postCss 帮助你的css实现更多功能</li><li>autoprefixer（自动添加前缀的插件）</li></ul><pre class="language-text"><code>npm install --save-dev postcss-loader autoprefixer
</code></pre><h2 id="plugins-插件"><a href="#plugins-插件" aria-hidden="true" class="header-anchor">#</a> plugins 插件</h2><p>用来拓展Webpack功能的，它们会在整个构建过程中生效，执行相关的任务。</p><blockquote><p>loaders 和 plugins的区别
loaders是在打包构建过程中用来处理源文件的（JSX，Scss，Less..），一次处理一个，插件并不直接操作单个文件，它直接对整个构建过程其作用。</p></blockquote><h3 id="使用"><a href="#使用" aria-hidden="true" class="header-anchor">#</a> 使用</h3><p>要使用某个插件，我们需要通过npm安装它，然后要做的就是在webpack配置中的plugins关键字部分添加该插件的一个实例（plugins是一个数组）继续上面的例子，我们添加了一个给打包后代码添加版权声明的插件。</p><h3 id="常用插件"><a href="#常用插件" aria-hidden="true" class="header-anchor">#</a> 常用插件</h3><ul><li><p>HtmlWebpackPlugin</p></li><li><p>为html文件中引入的外部资源如script、link动态添加每次compile后的hash，防止引用缓存的外部文件问题</p></li><li><p>可以生成创建html入口文件，比如单页面可以生成一个html文件入口，配置N个html-webpack-plugin可以生成N个页面入口</p></li></ul><blockquote><p>这个插件的作用是依据一个简单的index.html模板，生成一个自动引用你打包后的JS文件的新index.html。这在每次生成的js文件名称不同时非常有用（比如添加了hash值）。</p></blockquote><pre class="language-text"><code>npm install --save-dev html-webpack-plugin
</code></pre><p><img src="webpack%E6%95%B4%E7%90%86/htmlWebpackPlugins%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE.png" alt="'htmlWebpackPlugins常用配置.png'"></p><p>其他配置项解释如下：</p><ul><li>title: 生成的HTML模板的title，如果模板中有设置title的名字，则会忽略这里的设置</li><li>filename: 生成的模板文件的名字</li></ul><pre class="language-text"><code>1、filename配置的html文件目录是相对于webpackConfig.output.path路径而言的，不是相对于当前项目目录结构的。
2、指定生成的html文件内容中的link和script路径是相对于生成目录下的，写路径的时候请写生成目录下的相对路径。
</code></pre><ul><li><p>template: 模板来源文件</p></li><li><p>Hot Module Replacement
Hot Module Replacement（HMR）也是webpack里很有用的一个插件，它允许你在修改组件代码后，自动刷新实时预览修改后的效果。</p></li></ul><p>在webpack中实现HMR也很简单，只需要做两项配置</p><ol><li>在webpack配置文件中添加HMR插件；</li><li>在Webpack Dev Server中添加“hot”参数；</li></ol><p>不过配置完这些后，JS模块其实还是不能自动热加载的，还需要在你的JS模块中执行一个Webpack提供的API才能实现热加载，虽然这个API不难使用，但是如果是React模块，使用我们已经熟悉的Babel可以更方便的实现功能热加载。</p><ul><li>extract-text-webpack-plugin
从bundle中提取出特定的text到一个文件中。使用 extract-text-webpack-plugin就可以把css从js中独立抽离出来</li></ul><h2 id="webpack的一些高阶特性"><a href="#webpack的一些高阶特性" aria-hidden="true" class="header-anchor">#</a> webpack的一些高阶特性</h2><h3 id="commonschunk"><a href="#commonschunk" aria-hidden="true" class="header-anchor">#</a> CommonsChunk</h3><h3 id="tree-shaking"><a href="#tree-shaking" aria-hidden="true" class="header-anchor">#</a> Tree Shaking</h3><h3 id="多入口文件"><a href="#多入口文件" aria-hidden="true" class="header-anchor">#</a> 多入口文件</h3><h3 id="webpack-dev-server-2"><a href="#webpack-dev-server-2" aria-hidden="true" class="header-anchor">#</a> webpack-dev-server</h3><p><a href="https://segmentfault.com/a/1190000006670084" target="_blank" rel="noopener noreferrer">https://segmentfault.com/a/1190000006670084</a></p></div><!----><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/blog/vue生命周期.html" class="prev">
          vue生命周期
        </a></span><span class="next"><a href="/blog/分辨率与像素.html">
          分辨率与像素
        </a> →
      </span></p></div></div></div></div>
    <script src="/assets/js/14.c09d8685.js" defer></script><script src="/assets/js/app.c28e1187.js" defer></script>
  </body>
</html>
