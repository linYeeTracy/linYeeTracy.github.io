<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>linYee&#39;s blog | vue</title>
    <meta name="description" content="可长歌，可醉饮，唯不可离去">
    
    
    <link rel="preload" href="/assets/css/0.styles.e9561589.css" as="style"><link rel="preload" href="/assets/js/app.c28e1187.js" as="script"><link rel="preload" href="/assets/js/17.77a65d16.js" as="script"><link rel="prefetch" href="/assets/js/33.5d615819.js"><link rel="prefetch" href="/assets/js/1.314e9720.js"><link rel="prefetch" href="/assets/js/2.b7ae9f51.js"><link rel="prefetch" href="/assets/js/3.1469442e.js"><link rel="prefetch" href="/assets/js/4.8b9c3665.js"><link rel="prefetch" href="/assets/js/5.8f05fa48.js"><link rel="prefetch" href="/assets/js/6.de11eee2.js"><link rel="prefetch" href="/assets/js/7.058c7ab3.js"><link rel="prefetch" href="/assets/js/8.c485cbd9.js"><link rel="prefetch" href="/assets/js/9.14214538.js"><link rel="prefetch" href="/assets/js/10.0c8a647e.js"><link rel="prefetch" href="/assets/js/11.5d18dcd9.js"><link rel="prefetch" href="/assets/js/12.99e91df1.js"><link rel="prefetch" href="/assets/js/13.14fc9d1a.js"><link rel="prefetch" href="/assets/js/14.c09d8685.js"><link rel="prefetch" href="/assets/js/15.a2f4c159.js"><link rel="prefetch" href="/assets/js/16.c8513de2.js"><link rel="prefetch" href="/assets/js/18.2ed37ee1.js"><link rel="prefetch" href="/assets/js/19.1cf6910b.js"><link rel="prefetch" href="/assets/js/20.5a01f12d.js"><link rel="prefetch" href="/assets/js/21.ed3c83c5.js"><link rel="prefetch" href="/assets/js/22.418ec443.js"><link rel="prefetch" href="/assets/js/23.43c2d579.js"><link rel="prefetch" href="/assets/js/24.106790ab.js"><link rel="prefetch" href="/assets/js/25.83b6967b.js"><link rel="prefetch" href="/assets/js/26.2ddc9425.js"><link rel="prefetch" href="/assets/js/27.623b7ab8.js"><link rel="prefetch" href="/assets/js/28.51006cb3.js"><link rel="prefetch" href="/assets/js/29.0c2dbf0e.js"><link rel="prefetch" href="/assets/js/30.3dfcd80c.js"><link rel="prefetch" href="/assets/js/31.6e3e651d.js"><link rel="prefetch" href="/assets/js/32.a1340061.js"><link rel="prefetch" href="/assets/js/34.806c3aca.js"><link rel="prefetch" href="/assets/js/35.a93ce73b.js"><link rel="prefetch" href="/assets/js/36.88eb63e0.js"><link rel="prefetch" href="/assets/js/37.c53b1529.js"><link rel="prefetch" href="/assets/js/38.d8a736e3.js"><link rel="prefetch" href="/assets/js/39.8d87e087.js"><link rel="prefetch" href="/assets/js/40.abc9cabf.js"><link rel="prefetch" href="/assets/js/41.ab549a3a.js"><link rel="prefetch" href="/assets/js/42.d5b9899d.js"><link rel="prefetch" href="/assets/js/43.180edec4.js"><link rel="prefetch" href="/assets/js/44.fa1da641.js"><link rel="prefetch" href="/assets/js/45.e49fe417.js"><link rel="prefetch" href="/assets/js/46.006c5467.js"><link rel="prefetch" href="/assets/js/47.c2f4fe77.js"><link rel="prefetch" href="/assets/js/48.31f7bd25.js"><link rel="prefetch" href="/assets/js/49.ff43b66c.js"><link rel="prefetch" href="/assets/js/50.8097df43.js"><link rel="prefetch" href="/assets/js/51.ff1e2e34.js"><link rel="prefetch" href="/assets/js/52.0b64b055.js"><link rel="prefetch" href="/assets/js/53.d6b07f08.js"><link rel="prefetch" href="/assets/js/54.d90f1430.js"><link rel="prefetch" href="/assets/js/55.36a0f5d2.js"><link rel="prefetch" href="/assets/js/56.3fa1e1fc.js"><link rel="prefetch" href="/assets/js/57.b405dc9e.js"><link rel="prefetch" href="/assets/js/58.e00c43fc.js"><link rel="prefetch" href="/assets/js/59.80b36c49.js"><link rel="prefetch" href="/assets/js/60.a1bbdc6a.js"><link rel="prefetch" href="/assets/js/61.91a83384.js"><link rel="prefetch" href="/assets/js/62.23603e69.js"><link rel="prefetch" href="/assets/js/63.07c9232e.js"><link rel="prefetch" href="/assets/js/64.7e6b1d65.js"><link rel="prefetch" href="/assets/js/65.c802ed55.js"><link rel="prefetch" href="/assets/js/66.eea0beab.js"><link rel="prefetch" href="/assets/js/67.584b410a.js"><link rel="prefetch" href="/assets/js/68.cc18b160.js"><link rel="prefetch" href="/assets/js/69.77e1586e.js"><link rel="prefetch" href="/assets/js/70.2003d970.js"><link rel="prefetch" href="/assets/js/71.60093cc3.js"><link rel="prefetch" href="/assets/js/72.796ad2eb.js"><link rel="prefetch" href="/assets/js/73.c4a8b30b.js"><link rel="prefetch" href="/assets/js/74.feb798c8.js"><link rel="prefetch" href="/assets/js/75.6fb13014.js"><link rel="prefetch" href="/assets/js/76.edb2c0b5.js"><link rel="prefetch" href="/assets/js/77.9e39f58e.js"><link rel="prefetch" href="/assets/js/78.08ca8c00.js"><link rel="prefetch" href="/assets/js/79.7366f16a.js"><link rel="prefetch" href="/assets/js/80.0d2e0e48.js"><link rel="prefetch" href="/assets/js/81.fe23c69b.js"><link rel="prefetch" href="/assets/js/82.ca6ca6a2.js"><link rel="prefetch" href="/assets/js/83.03da1a3f.js"><link rel="prefetch" href="/assets/js/84.db1a588f.js"><link rel="prefetch" href="/assets/js/85.bcc7a0d3.js"><link rel="prefetch" href="/assets/js/86.82e737b3.js"><link rel="prefetch" href="/assets/js/87.ed015db9.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e9561589.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      linYee's blog
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">博客</a></div><div class="nav-item"><a href="/life/" class="nav-link">生活</a></div><div class="nav-item"><a href="/resume/" class="nav-link">简历</a></div><a href="https://github.com/linYeeTracy/blogs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">博客</a></div><div class="nav-item"><a href="/life/" class="nav-link">生活</a></div><div class="nav-item"><a href="/resume/" class="nav-link">简历</a></div><a href="https://github.com/linYeeTracy/blogs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><a href="/blog/md-example.html" class="sidebar-link">markdown语法实例</a></li><li><a href="/blog/git.html" class="sidebar-link">git 命令行</a></li><li><a href="/blog/github-plugins.html" class="sidebar-link">文档整理</a></li><li><a href="/blog/es6.html" class="sidebar-link">es6</a></li><li><a href="/blog/react.html" class="sidebar-link">react</a></li><li><a href="/blog/ruby-gem.html" class="sidebar-link">ruby-gem</a></li><li><a href="/blog/vue-amap.html" class="sidebar-link">在 Vue 中使用高德地图的一些问题</a></li><li><a href="/blog/vue-business-component.html" class="sidebar-link">谈谈 Vue 业务组件</a></li><li><a href="/blog/axios.html" class="sidebar-link">axios</a></li><li><a href="/blog/babel.html" class="sidebar-link">babel6 的变化</a></li><li><a href="/blog/css技巧.html" class="sidebar-link">css小技巧</a></li><li><a href="/blog/express.html" class="sidebar-link">嘻嘻嘻</a></li><li><a href="/blog/git-github.html" class="sidebar-link">git-github</a></li><li><a href="/blog/gulp插件集合.html" class="sidebar-link">gulp插件集合</a></li><li><a href="/blog/js-array.html" class="sidebar-link">js-array</a></li><li><a href="/blog/js的模块化.html" class="sidebar-link">js的模块化</a></li><li><a href="/blog/jwt.html" class="sidebar-link">jwt</a></li><li><a href="/blog/linux.html" class="sidebar-link">linux</a></li><li><a href="/blog/lodash.html" class="sidebar-link">lodash</a></li><li><a href="/blog/markdown.html" class="sidebar-link">packageJson</a></li><li><a href="/blog/nginx.html" class="sidebar-link">nginx</a></li><li><a href="/blog/node-fs.html" class="sidebar-link">node - fs</a></li><li><a href="/blog/node-express.html" class="sidebar-link">node-express</a></li><li><a href="/blog/node.html" class="sidebar-link">node</a></li><li><a href="/blog/npm整理.html" class="sidebar-link">npm整理</a></li><li><a href="/blog/packageJson.html" class="sidebar-link">packageJson</a></li><li><a href="/blog/pm2.html" class="sidebar-link">pm2</a></li><li><a href="/blog/reduce应用.html" class="sidebar-link">reduce应用及高级技巧</a></li><li><a href="/blog/server.html" class="sidebar-link">server</a></li><li><a href="/blog/vue-router.html" class="sidebar-link">安装</a></li><li><a href="/blog/vue.html" class="active sidebar-link">vue</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/vue.html#文档" class="sidebar-link">文档</a></li><li class="sidebar-sub-header"><a href="/blog/vue.html#vue组件库" class="sidebar-link">vue组件库</a></li><li class="sidebar-sub-header"><a href="/blog/vue.html#：" class="sidebar-link">：</a></li><li class="sidebar-sub-header"><a href="/blog/vue.html#computed" class="sidebar-link">computed</a></li><li class="sidebar-sub-header"><a href="/blog/vue.html#props" class="sidebar-link">props</a></li><li class="sidebar-sub-header"><a href="/blog/vue.html#this-指向" class="sidebar-link">this 指向</a></li><li class="sidebar-sub-header"><a href="/blog/vue.html#axios" class="sidebar-link">axios</a></li><li class="sidebar-sub-header"><a href="/blog/vue.html#总而言之，多用-let-和-const，少用-var" class="sidebar-link">总而言之，多用 let 和 const，少用 var</a></li><li class="sidebar-sub-header"><a href="/blog/vue.html#箭头函数" class="sidebar-link">箭头函数</a></li><li class="sidebar-sub-header"><a href="/blog/vue.html#router-beforeeach-全局前置守卫" class="sidebar-link">router.beforeEach -- 全局前置守卫</a></li><li class="sidebar-sub-header"><a href="/blog/vue.html#router-aftereach-全局后置钩子" class="sidebar-link">router.afterEach -- 全局后置钩子</a></li><li class="sidebar-sub-header"><a href="/blog/vue.html#beforeenter-路由独享的守卫" class="sidebar-link">beforeEnter -- 路由独享的守卫</a></li><li class="sidebar-sub-header"><a href="/blog/vue.html#组件内的守卫" class="sidebar-link">组件内的守卫</a></li><li class="sidebar-sub-header"><a href="/blog/vue.html#完整的导航解析流程" class="sidebar-link">完整的导航解析流程</a></li></ul></li><li><a href="/blog/vuex.html" class="sidebar-link">vuex</a></li><li><a href="/blog/vue生命周期.html" class="sidebar-link">vue生命周期</a></li><li><a href="/blog/webpack整理.html" class="sidebar-link">进击webpack</a></li><li><a href="/blog/分辨率与像素.html" class="sidebar-link">分辨率与像素</a></li><li><a href="/blog/模块化引入方式.html" class="sidebar-link">模块化引入方式</a></li><li><a href="/blog/正则表达式.html" class="sidebar-link">正则表达式</a></li><li><a href="/blog/正则表达式实例整理.html" class="sidebar-link">正则表达式实例整理</a></li><li><a href="/blog/xingnengyouhua.html" class="sidebar-link">前端性能优化总结</a></li></ul></div><div class="page"><div class="content"><h2 id="文档"><a href="#文档" aria-hidden="true" class="header-anchor">#</a> 文档</h2><p><a href="https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create" target="_blank" rel="noopener noreferrer">vue-cli 3.0文档</a></p><h2 id="vue组件库"><a href="#vue组件库" aria-hidden="true" class="header-anchor">#</a> vue组件库</h2><p><a href="https://www.iviewui.com/components/card" target="_blank" rel="noopener noreferrer">iview</a></p><h2 id="："><a href="#：" aria-hidden="true" class="header-anchor">#</a> ：</h2><p>:是v-bind的语法糖</p><p>someprop=&quot;expr&quot;:someprop=&quot;expr&quot;区别在于：</p><blockquote><p>后者引号中的内容你可以当做是一个表达式，而前者就跟html里的属性一样，其值永远是string类型</p></blockquote><p>:someprop里的表达式会在不同语境下有不同的含义，如：</p><ol><li>表单里，:value=&quot;name&quot;，表示输入值会同步到name变量，而文本框显示的指也来自于name变量（补充：这里说法不严谨，准确来说是v-model实现了双向绑定，不过v-model其实是一个语法糖，内部也是使用了:value，所以1、2两点都可以归结一起）</li><li>非表单情况下，:prop=&quot;expr&quot;，prop属性的值为expr表达式的计算结果</li><li>内联样式、类这两种特殊属性，:style=&quot;expr&quot;，:class=&quot;expr&quot;，会根据expr进行解析，最终生成目标style字符串 or class字符串</li></ol><p>特殊情况</p><p>prop 值是字符串字面量的时候不需要写绑定语法。<code>prop 值是true的时候不需要写绑定语法，也不需要写属性值</code>。</p><h2 id="computed"><a href="#computed" aria-hidden="true" class="header-anchor">#</a> computed</h2><p>computed 作用于其属性的getter,类似于</p><pre class="language-text"><code>Object.defineProperty(data, 'message', { 
    enumerable:true,
    get: function() { 
        return this._message.split('').reverse().join('');
    } 
});
</code></pre><h3 id="computed-method"><a href="#computed-method" aria-hidden="true" class="header-anchor">#</a> computed &amp;&amp; method</h3><p>methods 每次都会重新计算
而 computed 则会依赖于缓存
除非 computed` 依赖的值发生变化，否则直接调用缓存。</p><h2 id="props"><a href="#props" aria-hidden="true" class="header-anchor">#</a> props</h2><blockquote><p>仅仅当成是一种传递数据（而非改变数据的方式），我们可以自己在内部定义变量</p></blockquote><h2 id="this-指向"><a href="#this-指向" aria-hidden="true" class="header-anchor">#</a> this 指向</h2><p>使用then函数时，this指向的是全局对象window</p><h2 id="axios"><a href="#axios" aria-hidden="true" class="header-anchor">#</a> axios</h2><p>Vue.protpType.$http = axios;</p><h2 id="总而言之，多用-let-和-const，少用-var"><a href="#总而言之，多用-let-和-const，少用-var" aria-hidden="true" class="header-anchor">#</a> 总而言之，多用 let 和 const，少用 var</h2><p>cosnt定义的变量只能赋值一次（数组和对象来说，值是可以改变的）</p><pre class="language-text"><code>const arr  = [&quot;a&quot;,&quot;b&quot;,&quot;c&quot;];
arr.push(&quot;d&quot;);
arr.pop();
</code></pre><p>那么什么时候使用 const 呢? 在一些不需要重复赋值的场合可以用:</p><pre class="language-text"><code>const provinces = [];
const months = [];
</code></pre><h2 id="箭头函数"><a href="#箭头函数" aria-hidden="true" class="header-anchor">#</a> 箭头函数</h2><p>在vue中，使用箭头函数的最大好处就是可以让<code>this</code>指向vue实例</p><blockquote><p>箭头函数的<code>this</code>对象始终指向定义函数时所在的对象，相当于：</p></blockquote><pre class="language-text"><code>var vm = new Vue({
    el:'#root',
    data:{
        tasks:[]
    },
    mounted(){
        var that = this;
        axios.get('/tasks')
        .then(function (response) {
            that.tasks = response.data;
        })
    }
});
</code></pre><h1 id="模板字符串"><a href="#模板字符串" aria-hidden="true" class="header-anchor">#</a> 模板字符串</h1><p>没有模板字符串之前：</p><pre class="language-text"><code>let template = '&lt;div class=&quot;container&quot;&gt;&lt;p&gt;Foo&lt;/p&gt;&lt;/div&gt;';
</code></pre><p>如果要写成多行，可以用反斜杠：</p><pre class="language-text"><code>let template = '&lt;div class=&quot;container&quot;&gt;\
                    &lt;p&gt;Foo&lt;/p&gt;\
                &lt;/div&gt;';
</code></pre><p>或者使用数组形式:</p><pre class="language-text"><code>let template = [
    '&lt;div class=&quot;container&quot;&gt;',
    '&lt;p&gt;Foo&lt;/p&gt;',
    '&lt;/div&gt;'
].join('');
</code></pre><p>而使用模板字符串，则可以方便的在多行里面编写模板:</p><pre class="language-text"><code>let template = `
    &lt;div class=&quot;container&quot;&gt;
        &lt;p&gt;Foo&lt;/p&gt;
    &lt;/div&gt;
`
</code></pre><p>由于模板字符串的空格和换行会被保留，为了不让首行多出换行符，可以写成：</p><pre class="language-text"><code>let template = `&lt;div class=&quot;container&quot;&gt;
                        &lt;p&gt;Foo&lt;/p&gt;
                    &lt;/div&gt;
                `
</code></pre><p>或者使用 trim() 方法从字符串中移除 前导 空格、尾随空格和行终止符。</p><pre class="language-text"><code>let template = `
    &lt;div class=&quot;container&quot;&gt;
        &lt;p&gt;Foo&lt;/p&gt;
    &lt;/div&gt;
`.trim();
</code></pre><p>模板字符串嵌入变量或者表达式的方式也很简单:</p><pre class="language-text"><code>let name = &quot;jack&quot;;
let template = `
    &lt;div class=&quot;container&quot;&gt;
        &lt;p&gt;${name} is {100 + 100}&lt;/p&gt;
    &lt;/div&gt;
`.trim();
</code></pre><h1 id="store"><a href="#store" aria-hidden="true" class="header-anchor">#</a> store</h1><p>再次强调，我们通过提交 mutation 的方式，而非直接改变 store.state.count，是因为我们想要更明确地追踪到状态的变化。这个简单的约定能够让你的意图更加明显，这样你在阅读代码的时候能更容易地解读应用内部的状态改变。</p><h1 id="render-h-h-app"><a href="#render-h-h-app" aria-hidden="true" class="header-anchor">#</a> render: h =&gt; h(App)</h1><pre class="language-text"><code>render: function (createElement) {
    return createElement(App);
}
</code></pre><p>createElement 函数是用来生成 HTML DOM 元素的，也就是上文中的 generate HTML structures，也就是 Hyperscript，这样作者才把 createElement 简写成 h</p><p>这个函数的作用就是生成一个 VNode节点，render 函数得到这个 VNode 节点之后，返回给 Vue.js 的 mount 函数，渲染成真实 DOM 节点，并挂载到根节点上。</p><h1 id="q-a"><a href="#q-a" aria-hidden="true" class="header-anchor">#</a> Q &amp; A</h1><ol><li>vue组件注册为什么有时候要在 <code>require</code> 后面加上 <code>default</code> ?</li></ol><p>webpack 打包时支持 CommonJS、AMD 和 ES6 的模块化系统。
我们通常写 .vue 单文件组件时，在 script 语言块中使用的是 ES6 的语法，使用 <code>export default</code> 进行默认导出。</p><p><code>require</code> 是 <code>CommonJS</code>（和 AMD，想不到吧？）的模块导入方式，不支持模块的默认导出，因此导入的结果其实是一个含 <code>default</code> 属性的对象，因此需要使用 <code>.default</code> 来获取实际的组件选项。或者使用 ES6 的 import 语句，ES6 的模块化导入导出语法参见 <code>http://es6-features.org/#Valu...</code>，<code>import</code> 时需要给定一个变量名，<code>所有 import 语句必须统一放在模块的开头</code>。</p><p>如果 <code>.vue</code> 文件中使用的本来就是 <code>CommonJS</code> 或者 <code>AMD</code> 的模块化系统语法，导出的是 <code>module.exports</code> 对象作为组件选项，那么使用 <code>require</code> 导入时就不需要使用 <code>.default</code> 来获取。</p><p>1.1 用<code>webpack</code>打包 <code>esm</code> 成可直接引入的配置</p><p>之前打包export default导出的包都会成为</p><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 内容</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>webpack3多了一个配置</p><pre class="language-javascript"><code>libraryExport<span class="token punctuation">:</span> <span class="token string">'default'</span> <span class="token comment">// 会将default中内容打包</span>
</code></pre><pre class="language-javascript"><code><span class="token punctuation">{</span>
  \\ 内容
<span class="token punctuation">}</span>
</code></pre><h1 id="vue-router"><a href="#vue-router" aria-hidden="true" class="header-anchor">#</a> vue-router</h1><ol><li>当使用路由参数时，例如从 <code>/user/foo</code> 导航到 <code>/user/bar</code>，原来的组件实例会被复用。因为两个路由都渲染同个组件，比起销毁再创建，复用则显得更加高效。不过，这也意味着组件的生命周期钩子不会再被调用。</li></ol><p>想对路由参数的变化作出响应的话，你可以简单地 watch（监测变化） <code>$route</code> 对象：</p><pre class="language-javascript"><code><span class="token keyword">const</span> User <span class="token operator">=</span> <span class="token punctuation">{</span>
  template<span class="token punctuation">:</span> <span class="token string">'...'</span><span class="token punctuation">,</span>
  watch<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">'$route'</span> <span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 对路由变化作出响应...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>或者使用 2.2 中引入的 <code>beforeRouteUpdate</code> 钩子响应变化</p><pre class="language-javascript"><code><span class="token keyword">const</span> User <span class="token operator">=</span> <span class="token punctuation">{</span>
  template<span class="token punctuation">:</span> <span class="token string">'...'</span><span class="token punctuation">,</span>
  <span class="token function">beforeRouteUpdate</span> <span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// react to route changes...</span>
    <span class="token comment">// don't forget to call next()</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><ol start="2"><li>router.push(...)</li></ol><blockquote><p>点击 <code>&lt;router-link :to=&quot;...&quot;&gt;</code> 等同于调用</p></blockquote><p>该方法的参数可以是一个字符串路径，或者一个描述地址的对象</p><pre class="language-javascript"><code><span class="token comment">// 字符串</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'home'</span><span class="token punctuation">)</span>

<span class="token comment">// 对象</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'home'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 命名的路由</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span> params<span class="token punctuation">:</span> <span class="token punctuation">{</span> userId<span class="token punctuation">:</span> <span class="token number">123</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 带查询参数，变成 /register?plan=private</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'register'</span><span class="token punctuation">,</span> query<span class="token punctuation">:</span> <span class="token punctuation">{</span> plan<span class="token punctuation">:</span> <span class="token string">'private'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><blockquote><p>如果提供了 path，params 会被忽略，应该使用如下做法</p></blockquote><pre class="language-javascript"><code><span class="token keyword">const</span> userId <span class="token operator">=</span> <span class="token number">123</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span> params<span class="token punctuation">:</span> <span class="token punctuation">{</span> userId <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// -&gt; /user/123</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`/user/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>userId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// -&gt; /user/123</span>
<span class="token comment">// 这里的 params 不生效</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">'/user'</span><span class="token punctuation">,</span> params<span class="token punctuation">:</span> <span class="token punctuation">{</span> userId <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// -&gt; /user</span>
</code></pre><ol start="3"><li>router.replace(location, onComplete?, onAbort?)</li></ol><blockquote><p>跟 <code>router.push</code> 很像，唯一的不同就是，它不会向 history 添加新记录，而是跟它的方法名一样 —— 替换掉当前的 <code>history</code> 记录。</p></blockquote><ol start="4"><li>router.go(n)</li></ol><blockquote><p>这个方法的参数是一个整数，意思是在 history 记录中向前或者后退多少步，类似 <code>window.history.go(n)</code></p></blockquote><h1 id="导航守卫"><a href="#导航守卫" aria-hidden="true" class="header-anchor">#</a> 导航守卫</h1><blockquote><p>参数或者查询的改变并不会触发进入/离开的导航守卫</p></blockquote><h2 id="router-beforeeach-全局前置守卫"><a href="#router-beforeeach-全局前置守卫" aria-hidden="true" class="header-anchor">#</a> router.beforeEach -- 全局前置守卫</h2><pre class="language-javascript"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><h2 id="router-aftereach-全局后置钩子"><a href="#router-aftereach-全局后置钩子" aria-hidden="true" class="header-anchor">#</a> router.afterEach -- 全局后置钩子</h2><blockquote><p>这些钩子不会接受 next 函数也不会改变导航本身</p></blockquote><pre class="language-javascript"><code>router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><h2 id="beforeenter-路由独享的守卫"><a href="#beforeenter-路由独享的守卫" aria-hidden="true" class="header-anchor">#</a> beforeEnter -- 路由独享的守卫</h2><blockquote><p>可以在路由配置上直接定义 <code>beforeEnter</code> 守卫</p></blockquote><pre class="language-javascript"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      path<span class="token punctuation">:</span> <span class="token string">'/foo'</span><span class="token punctuation">,</span>
      component<span class="token punctuation">:</span> Foo<span class="token punctuation">,</span>
      beforeEnter<span class="token punctuation">:</span> <span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><h2 id="组件内的守卫"><a href="#组件内的守卫" aria-hidden="true" class="header-anchor">#</a> 组件内的守卫</h2><p>beforeRouteEnter
beforeRouteUpdate (2.2 新增)
beforeRouteLeave</p><pre class="language-javascript"><code><span class="token keyword">const</span> Foo <span class="token operator">=</span> <span class="token punctuation">{</span>
  template<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`...`</span></span><span class="token punctuation">,</span>
  <span class="token function">beforeRouteEnter</span> <span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在渲染该组件的对应路由被 confirm 前调用</span>
    <span class="token comment">// 不！能！获取组件实例 `this`</span>
    <span class="token comment">// 因为当守卫执行前，组件实例还没被创建</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeRouteUpdate</span> <span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在当前路由改变，但是该组件被复用时调用</span>
    <span class="token comment">// 举例来说，对于一个带有动态参数的路径 /foo/:id，在 /foo/1 和 /foo/2 之间跳转的时候，</span>
    <span class="token comment">// 由于会渲染同样的 Foo 组件，因此组件实例会被复用。而这个钩子就会在这个情况下被调用。</span>
    <span class="token comment">// 可以访问组件实例 `this`</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeRouteLeave</span> <span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 导航离开该组件的对应路由时调用</span>
    <span class="token comment">// 可以访问组件实例 `this`</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><h2 id="完整的导航解析流程"><a href="#完整的导航解析流程" aria-hidden="true" class="header-anchor">#</a> 完整的导航解析流程</h2><ul><li>导航被触发。</li><li>在失活的组件里调用离开守卫。</li><li>调用全局的 beforeEach 守卫。</li><li>在重用的组件里调用 beforeRouteUpdate 守卫 (2.2+)。</li><li>在路由配置里调用 beforeEnter。</li><li>解析异步路由组件。</li><li>在被激活的组件里调用 beforeRouteEnter。</li><li>调用全局的 beforeResolve 守卫 (2.5+)。</li><li>导航被确认。</li><li>调用全局的 afterEach 钩子。</li><li>触发 DOM 更新。</li><li>用创建好的实例调用 beforeRouteEnter 守卫中传给 next 的回调函数。</li></ul><h1 id="key"><a href="#key" aria-hidden="true" class="header-anchor">#</a> key</h1><blockquote><p>提高循环性能</p></blockquote><p>key 的特殊属性主要用在 Vue的虚拟DOM算法，在新旧nodes对比时辨识VNodes.如果不使用key，Vue会使用一种最大限度减少动态元素并且尽可能的尝试修复/再利用相同类型元素的算法。使用key，它会基于key的变化重新排列元素顺序，并且会移除key不存在的元素。</p><p><strong>有相同父元素的子元素必须有独特的key。重复的key会造成渲染错误</strong></p><p>最常见的用例是结合 v-for</p><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item in items<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre><p>它也可以用于强制替换元素/组件而不是重复使用它。当你遇到如下场景时它可能会很有用:</p><p>完整地触发组件的生命周期钩子
触发过渡</p><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ text }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
</code></pre><p>当 text 发生改变时，<code>&lt;span&gt;</code> 会随时被更新，因此会触发过渡。</p></div><!----><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/blog/vue-router.html" class="prev">
          安装
        </a></span><span class="next"><a href="/blog/vuex.html">
          vuex
        </a> →
      </span></p></div></div></div></div>
    <script src="/assets/js/17.77a65d16.js" defer></script><script src="/assets/js/app.c28e1187.js" defer></script>
  </body>
</html>
