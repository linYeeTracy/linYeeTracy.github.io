(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{248:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"babel6-的变化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel6-的变化","aria-hidden":"true"}},[t._v("#")]),t._v(" babel6 的变化")]),a("ol",[a("li",[t._v("移除babel全家桶安装，拆分为单独模块，例如：")])]),a("p",[a("a",{attrs:{href:""}},[t._v("babel-core")]),t._v(" babel核心api都在这个模块，比如： tansform")]),a("p",[a("a",{attrs:{href:""}},[t._v("babel-cli")])]),a("p",[t._v("babel-cli是一个通过命令行对js文件进行换码的工具。")]),a("p",[t._v("使用方法：")]),a("p",[t._v("直接在命令行输出转译后的代码")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("babel script.js\n")])]),a("p",[t._v("指定输出文件")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("babel script.js --out-file build.js\n或者是\nbabel script.js -o build.js\n")])]),a("p",[a("a",{attrs:{href:""}},[t._v("babel-node")]),t._v("\nbabel-node是随babel-cli一起安装的，只要安装了babel-cli就会自带babel-node。\n在命令行输入babel-node会启动一个REPL（Read-Eval-Print-Loop），这是一个支持ES6的js执行环境。")]),a("p",[a("a",{attrs:{href:""}},[t._v("babel-register")]),t._v("\nbabel-register字面意思能看出来，这是babel的一个注册器，它在底层改写了node的require方法，引入babel-register之后所有require并以.es6, .es, .jsx 和 .js为后缀的模块都会经过babel的转译。")]),a("p",[t._v("默认babel-register会忽略对node_modules目录下模块的转译，如果要开启可以进行如下配置。")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('require("babel-register")({\n  ignore: false\n});\n')])]),a("p",[t._v("babel-register与babel-core会同时安装，在babel-core中会有一个register.js文件，所以引入babel-register有两种方法：")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("require('babel-core/register');\nrequire('babel-register'); // 推荐，babel-register已经独立成一个模块。\n")])]),a("p",[a("a",{attrs:{href:""}},[t._v("babel-polyfill")])]),a("p",[t._v("polyfill这个单词翻译成中文是垫片的意思，详细点解释就是桌子的桌脚有一边矮一点，拿一个东西把桌子垫平。polyfill在代码中的作用主要是用已经存在的语法和api实现一些浏览器还没有实现的api，对浏览器的一些缺陷做一些修补。\nbabel的转译只是语法层次的转译，例如箭头函数、解构赋值、class，对一些新增api以及全局函数（例如：Promise）无法进行转译，这个时候就需要在代码中引入babel-polyfill，让代码完美支持ES6+环境。前面介绍的babel-node就会自动在代码中引入babel-polyfill包。")]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("新增 .babelrc 配置文件，基本上所有的babel转译都会来读取这个配置；")]),a("li",[t._v("新增 plugin 配置，所有的东西都插件化，什么代码要转译都能在插件中自由配置；")]),a("li",[t._v("新增 preset 配置，babel5会默认转译ES6和jsx语法，babel6转译的语法都要在perset中配置，preset简单说就是一系列plugin包的使用。")])]),a("h3",{attrs:{id:"babelrc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babelrc","aria-hidden":"true"}},[t._v("#")]),t._v(" babelrc")]),a("p",[t._v("后面的后缀rc来自linux中，使用过linux就知道linux中很多rc结尾的文件，比如.bashrc，rc是run command的缩写，翻译成中文就是运行时的命令，表示程序执行时就会来调用这个文件。\nbabel所有的操作基本都会来读取这个配置文件，除了一些在回调函数中设置options参数的，如果没有这个配置文件，会从"),a("code",[t._v("package.json")]),t._v("文件的babel属性中读取配置。")]),a("h1",{attrs:{id:"babel转译器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel转译器","aria-hidden":"true"}},[t._v("#")]),t._v(" babel转译器")]),a("p",[t._v("在.babelrc配置文件中，主要是对预设（presets）和插件（plugins）进行配置，因此不同的转译器作用不同的配置项，大致可分为以下三项：")]),a("h2",{attrs:{id:"语法转义器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#语法转义器","aria-hidden":"true"}},[t._v("#")]),t._v(" 语法转义器")]),a("p",[t._v("主要对javascript最新的语法糖进行编译，并不负责转译javascript新增的api和全局对象。\n常用到的转译器包有，babel-preset-env、babel-preset-es2015、babel-preset-es2016、babel-preset-es2017、babel-preset-latest等。\n在实际开发中可以只选用babel-preset-env来代替余下的，但是还需要配上javascirpt的制作规范一起使用，同时也是官方推荐：")]),a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n "),a("span",{attrs:{class:"token string"}},[t._v('"presets"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v('"env"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{attrs:{class:"token string"}},[t._v('"modules"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v('"stage-2"')]),t._v("\n  \n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("h2",{attrs:{id:"补丁转义器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#补丁转义器","aria-hidden":"true"}},[t._v("#")]),t._v(" 补丁转义器")]),a("p",[t._v("主要负责转译javascript新增的api和全局对象\nbabel-plugin-transform-runtime, babel-polyfill")]),a("h2",{attrs:{id:"jsx和flow插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jsx和flow插件","aria-hidden":"true"}},[t._v("#")]),t._v(" jsx和flow插件")]),a("p",[t._v("这类转译器用来转译JSX语法和移除类型声明的，使用Rect的时候你将用到它，转译器名称为babel-preset-react")]),a("p",[t._v("plugins")]),a("p",[t._v("babel中的插件，通过配置不同的插件才能告诉babel，我们的代码中有哪些是需要转译的。")]),a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token string"}},[t._v('"plugins"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{attrs:{class:"token string"}},[t._v('"transform-es2015-arrow-functions"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("//转译箭头函数")]),t._v("\n        "),a("span",{attrs:{class:"token string"}},[t._v('"transform-es2015-classes"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("//转译class语法")]),t._v("\n        "),a("span",{attrs:{class:"token string"}},[t._v('"transform-es2015-spread"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("//转译数组解构")]),t._v("\n        "),a("span",{attrs:{class:"token string"}},[t._v('"transform-es2015-for-of"')]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("//转译for-of")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("//如果要为某个插件添加配置项，按如下写法：")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token string"}},[t._v('"plugins"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("//改为数组，第二个元素为配置项")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v('"transform-es2015-arrow-functions"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"spec"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("p",[t._v("presets")]),a("p",[t._v("然这样一个一个配置插件会非常的麻烦，为了方便，babel为我们提供了一个配置项叫做persets（预设）。")]),a("p",[t._v("预设就是一系列插件的集合，就好像修图一样，把上次修图的一些参数保存为一个预设，下次就能直接使用。")]),a("p",[t._v("如果要转译ES6语法，只要按如下方式配置即可：")]),a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("//先安装ES6相关preset： cnpm install -D babel-preset-es2015")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token string"}},[t._v('"presets"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v('"es2015"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("//如果要转译的语法不止ES6，还有各个提案阶段的语法也想体验，可以按如下方式。")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("//安装需要的preset： cnpm install -D babel-preset-stage-0 babel-preset-stage-1 babel-preset-stage-2 babel-preset-stage-3")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token string"}},[t._v('"presets"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{attrs:{class:"token string"}},[t._v('"es2015"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{attrs:{class:"token string"}},[t._v('"stage-0"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{attrs:{class:"token string"}},[t._v('"stage-1"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{attrs:{class:"token string"}},[t._v('"stage-2"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{attrs:{class:"token string"}},[t._v('"stage-3"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("//同样babel也能直接转译jsx语法，通过引入react的预设")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("//cnpm install -D babel-preset-react")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token string"}},[t._v('"presets"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{attrs:{class:"token string"}},[t._v('"es2015"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{attrs:{class:"token string"}},[t._v('"react"')]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("p",[t._v("不过上面这些preset官方现在都已经不推荐了，官方唯一推荐preset：babel-preset-env。")]),a("p",[t._v("这款preset能灵活决定加载哪些插件和polyfill，不过还是得开发者手动进行一些配置。")]),a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// cnpm install -D babel-preset -env")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token string"}},[t._v('"presets"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v('"env"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token string"}},[t._v('"targets"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("//指定要转译到哪个环境")]),t._v("\n                "),a("span",{attrs:{class:"token comment"}},[t._v("//浏览器环境")]),t._v("\n                "),a("span",{attrs:{class:"token string"}},[t._v('"browsers"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v('"last 2 versions"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"safari >= 7"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{attrs:{class:"token comment"}},[t._v("//node环境")]),t._v("\n                "),a("span",{attrs:{class:"token string"}},[t._v('"node"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"6.10"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v('//"current"  使用当前版本的node')]),t._v("\n                \n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n             "),a("span",{attrs:{class:"token comment"}},[t._v("//是否将ES6的模块化语法转译成其他类型")]),t._v("\n             "),a("span",{attrs:{class:"token comment"}},[t._v('//参数："amd" | "umd" | "systemjs" | "commonjs" | false，默认为\'commonjs\'')]),t._v("\n            "),a("span",{attrs:{class:"token string"}},[t._v('"modules"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'commonjs'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{attrs:{class:"token comment"}},[t._v("//是否进行debug操作，会在控制台打印出所有插件中的log，已经插件的版本")]),t._v("\n            "),a("span",{attrs:{class:"token string"}},[t._v('"debug"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{attrs:{class:"token comment"}},[t._v("//强制开启某些模块，默认为[]")]),t._v("\n            "),a("span",{attrs:{class:"token string"}},[t._v('"include"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v('"transform-es2015-arrow-functions"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{attrs:{class:"token comment"}},[t._v("//禁用某些模块，默认为[]")]),t._v("\n            "),a("span",{attrs:{class:"token string"}},[t._v('"exclude"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v('"transform-es2015-for-of"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{attrs:{class:"token comment"}},[t._v("//是否自动引入polyfill，开启此选项必须保证已经安装了babel-polyfill")]),t._v("\n            "),a("span",{attrs:{class:"token comment"}},[t._v("//参数：Boolean，默认为false.")]),t._v("\n            "),a("span",{attrs:{class:"token string"}},[t._v('"useBuiltIns"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("p",[t._v("关于最后一个参数useBuiltIns，有两点必须要注意：")]),a("ol",[a("li",[t._v("如果useBuiltIns为true，项目中必须引入babel-polyfill。")]),a("li",[t._v("babel-polyfill只能被引入一次，如果多次引入会造成全局作用域的冲突。")])]),a("p",[t._v("同样的代码，只是.babelrc配置中一个开启了useBuiltIns，一个没有，两个js文件体积相差70K.")]),a("h1",{attrs:{id:"引入-babel-polyfill-不使用usebuiltins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#引入-babel-polyfill-不使用usebuiltins","aria-hidden":"true"}},[t._v("#")]),t._v(" 引入 babel-polyfill(不使用useBuiltIns)")]),a("ol",[a("li",[t._v("(浏览器环境)单独在html的"),a("code",[t._v("<head>")]),t._v(" 标签中引入"),a("code",[t._v("babel-polyfill.js")]),t._v("(CDN或本地文件均可)")]),a("li",[t._v("在"),a("code",[t._v("webpack")]),t._v("配置文件增加入口:如"),a("code",[t._v("entry: [\"babel-polyfill\",'./src/app.js']")]),t._v(",polyfill将会被打包进去,记得在package.json中添加生产babel-polyfill依赖")]),a("li",[t._v("在"),a("code",[t._v("webpack")]),t._v("入口文件顶部使用"),a("code",[t._v("import/require")]),t._v("引入,如"),a("code",[t._v("import 'babel-polyfill'")]),t._v(",同时"),a("code",[t._v("package.json")]),t._v("添加生产依赖babel-polyfill")])]),a("p",[t._v("优点")]),a("ol",[a("li",[t._v("一次性解决所有兼容性问题,而且是全局的,浏览器的console也可以使用")])]),a("p",[t._v("缺点")]),a("ol",[a("li",[t._v("一次性引入了"),a("code",[t._v("ES@next")]),t._v("的所有"),a("code",[t._v("polyfill")]),t._v(",打包后的js文件会偏大")]),a("li",[t._v("对于现代的浏览器,有些不需要"),a("code",[t._v("polyfill")]),t._v(",造成流量浪费")]),a("li",[t._v("污染了全局对象")]),a("li",[t._v("不适合框架或库的开发")])]),a("h1",{attrs:{id:"全局babel-polyfill-使用babel-preset-env和usebuiltins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#全局babel-polyfill-使用babel-preset-env和usebuiltins","aria-hidden":"true"}},[t._v("#")]),t._v(" 全局babel-polyfill(使用babel-preset-env和useBuiltIns)")]),a("p",[t._v("pacakge.json引入开发依赖babel-preset-env\n.babelrc中使用preset-env\n指定useBuiltins选项为true\n指定浏览器环境或node环境\n在webpack入口文件中使用"),a("code",[t._v("import/require")]),t._v("引入"),a("code",[t._v("polyfill")]),t._v(",如 "),a("code",[t._v("import 'babel-polyfill'")])]),a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v('"presets"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v('"env"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{attrs:{class:"token string"}},[t._v('"modules"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{attrs:{class:"token string"}},[t._v('"targets"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token string"}},[t._v('"browsers"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v('"ie >=6"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{attrs:{class:"token string"}},[t._v('"useBuiltIns"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{attrs:{class:"token string"}},[t._v('"debug"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("p",[t._v("优点\n按需(按照指定的浏览器环境所需,并非按照代码所需)引入polyfill,一定程度上减少了不必要polyfill的引入")]),a("p",[t._v("配置简单,无需对webpack\\html做额外的配置\\引入")]),a("p",[t._v("注意:")]),a("p",[t._v("不可与方法3混用,否则会引起冲突\n全局方式要保证polyfill在所有其它脚本之前被执行(首行import或者设置为html的第一个"),a("code",[t._v("<head>")]),t._v("标签)")]),a("h2",{attrs:{id:"polyfill-io"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#polyfill-io","aria-hidden":"true"}},[t._v("#")]),t._v(" polyfill.io")]),a("p",[t._v("一个CDN方式提供的polyfill,可根据浏览器UserAgent自动返回合适的polyfill,详细内容自行google.")]),a("h1",{attrs:{id:"babel-preset-env"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babel-preset-env","aria-hidden":"true"}},[t._v("#")]),t._v(" babel-preset-env")]),a("p",[t._v("babel preset将基于你的实际浏览器及运行环境，自动的确定babel插件及polyfills，转译ES2015及此版本以上的语言")]),a("p",[t._v("在没有配置项的情况下，babel-preset-env表现的同babel-preset-latest一样(或者可以说同babel-preset-es2015, babel-preset-es2016, and babel-preset-es2017结合到一起，表现的一致)")]),a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token string"}},[t._v('"presets"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v('"env"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("p",[t._v("你也可以通过配置polyfills和transforms来支持你所需要支持的浏览器，仅配置需要支持的语法来使你的打包文件更轻量级。")]),a("p",[t._v("下面的例子，包括polyfills和代码，针对各个浏览器的最新的两个版本，以及safari的版本7及以上，针对以上两个条件的兼容情况进行代码转译。我们根据browserslist来分析具体的支持情况，所以，你可以用任何有效的browserslist查询格式来配置选项。")]),a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v('"presets"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v('"env"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{attrs:{class:"token string"}},[t._v('"targets"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token string"}},[t._v('"browsers"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v('"last 2 versions"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"safari >= 7"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("p",[t._v("相同的，如果你的运行环境使node.js，你页可以配置babel-preset-env来支持一个特殊的node版本")]),a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v('"presets"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v('"env"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{attrs:{class:"token string"}},[t._v('"targets"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token string"}},[t._v('"node"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"6.10"')]),t._v("\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("p",[t._v('为了更佳的方便，可以使用"node": "current"根据你运行时的node.js版本,挑选需要的polyfills和transforms来支持。')]),a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v('"presets"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v('"env"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{attrs:{class:"token string"}},[t._v('"targets"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token string"}},[t._v('"node"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"current"')]),t._v("\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])}],!1,null,null,null);s.default=e.exports}}]);